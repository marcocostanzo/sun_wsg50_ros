<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
  
  <xacro:macro name="wsg50" params="parent hardware_interface robot_name *origin scale finger_file fingerpx fingerpy fingerpz fingeror fingerop fingeroy ee_link_z">
    
    <!--joint between {parent} and gripper_roll_link-->
    <joint name="${parent}_${robot_name}_joint" type="fixed">
      <xacro:insert_block name="origin"/>
      <parent link="${parent}"/>
      <child link="gripper_roll_link"/>
    </joint>

  <!-- GRIPPER ROLL LINK -->
 <link name="gripper_roll_link">
      <inertial>
          <mass value="1.2" />
          <origin xyz="0 0 0" />
      	  <inertia  ixx="1.0" ixy="0.0"  ixz="0.0"  iyy="1.0"  iyz="0.0"  izz="1.0" />
      </inertial>
      <visual>
          <origin xyz="0.0 0 0" rpy="0 0 0" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/WSG50_110.stl" scale="${scale*1} ${scale*1} ${scale*1}"/>
          </geometry>
          <material name="grey">
				<color rgba="0.5 0.5 0.5 1"/>
      	 </material>
      </visual>

      <collision>
          <origin xyz="0.0 0 0" rpy="0 0 0" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/WSG50_110.stl" scale="${scale*1} ${scale*1} ${scale*1}"/>
         </geometry>
     </collision>
  </link>


 <!--   FINGERS  -->
  <!-- LEFT GRIPPER AFT LINK -->
  <link name="finger_link1">
    <gazebo>
      <selfcollide>true</selfcollide>
    </gazebo>
    <visual>
          <origin xyz="0.0 0 0.0" rpy="0 0 0" />
      <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/GUIDE_WSG50_110.stl" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
          <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/GUIDE_WSG50_110.stl" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
      </geometry>
    </collision>
      <inertial>
          <mass value="0.1" />
          <origin xyz="0 0 0" />
      <inertia ixx="1.0" ixy="0.0" ixz="0.0"
               iyy="1.0" iyz="0.0" 
               izz="1.0" />
      </inertial>
  </link>

  <joint name="finger_joint1" type="prismatic">
    <parent link="gripper_roll_link"/>
    <child link="finger_link1"/>
    <origin xyz="0 0 0"/>
    <axis xyz="1 0 0"/>
     <limit lower="${-0.055*scale}" upper="${-0.0027*scale}" effort="1.0" velocity="1.0"/>
    <dynamics damping="50" friction="1"/>
</joint>

  <joint name="guide_joint_finger_left" type="fixed">
     <origin xyz="0 0 ${0.023*scale}" rpy="0 0 0" />
     <parent link="finger_link1"/>
     <child link="finger_left" />
     <dynamics friction="100" damping="100" />
     <axis xyz="1 0 0"/>
     <limit effort="100" velocity="100"/>
  </joint>

  <link name="finger_left">
      <visual>
          <origin xyz="${fingerpx*scale} ${fingerpy*scale} ${fingerpz*scale}" rpy="${fingeror} ${fingerop} ${fingeroy}" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/${finger_file}" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
          </geometry>
          <material name="White">
      	  </material>
      </visual>

      <collision>
          <origin xyz="${fingerpx*scale} ${fingerpy*scale} ${fingerpz*scale}" rpy="${fingeror} ${fingerop} ${fingeroy}" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/${finger_file}" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
         </geometry>
     </collision>
  </link>


 <!-- RIGHT GRIPPER AFT LINK -->
<link name="finger_link2">
    <gazebo>
      <selfcollide>true</selfcollide>
    </gazebo>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0.0"/> 
      <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/GUIDE_WSG50_110.stl" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.0"/> 
      <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/GUIDE_WSG50_110.stl" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
      </geometry>
      <material name="orange"/>
    </collision>
    <inertial>
      <mass value="1"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="0.5" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <joint name="finger_joint2" type="prismatic">
     <limit lower="${0.0027*scale}" upper="${0.055*scale}" effort="1.0" velocity="1.0"/>
     <origin xyz="0 0 0" rpy="0 0 3.14159" />
     <parent link="gripper_roll_link"/>
     <child link="finger_link2" />
     <axis xyz="-1 0 0"/>
     <dynamics friction="100" damping="100" />
     <limit effort="100" velocity="100"/>
  </joint>

  <joint name="guide_joint_finger_right" type="fixed">
     <origin xyz="0 0 ${0.023*scale}" rpy="0 0 0" />
     <parent link="finger_link2"/>
     <child link="finger_right" />
     <dynamics friction="100" damping="100" />
     <axis xyz="1 0 0"/>
     <limit effort="100" velocity="100"/>
  </joint>

  <link name="finger_right">
      <visual>
          <origin xyz="${fingerpx*scale} ${fingerpy*scale} ${fingerpz*scale}" rpy="${fingeror} ${fingerop} ${fingeroy}" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/${finger_file}" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
          </geometry>
          <material name="White">
      	  </material>
      </visual>

      <collision>
          <origin xyz="${fingerpx*scale} ${fingerpy*scale} ${fingerpz*scale}" rpy="${fingeror} ${fingerop} ${fingeroy}" />
          <geometry>
             <mesh filename="package://sun_wsg50_simulation/meshes/${finger_file}" scale="${scale*0.001} ${scale*0.001} ${scale*0.001}"/>
         </geometry>
     </collision>
  </link>-->

    <link name="${robot_name}_link_ee">
    </link>

    <joint name="${robot_name}_joint_ee" type="fixed">
      <parent link="gripper_roll_link"/>
      <child link="${robot_name}_link_ee"/>
      <origin rpy="0 -1.57 0" xyz="0 0 ${ee_link_z*scale}"/>
    </joint>

  </xacro:macro>
  
</robot>
